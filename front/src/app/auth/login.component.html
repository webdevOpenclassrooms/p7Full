<mat-card class="profil-card">
  <mat-dialog-content>
    <form [formGroup]="loginForm">
      <mat-form-field appearance="outline">
        <mat-label>Email</mat-label>
        <input matInput id="email" formControlName="email" />
        <mat-icon
          matSuffix
          aria-hidden="false"
          aria-label="Email login"
          class="emailIcon"
        >
          &#xe0e6;
        </mat-icon>

        <mat-error *ngIf="!email.pristine && email.invalid">{{
          getErrorMessage()
        }}</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Mot de passe</mat-label>
        <input
          matInput
          [type]="hide ? 'password' : 'text'"
          formControlName="password"
          aria-hidden="false"
          aria-label="password"
        />
        <button
          mat-icon-button
          matSuffix
          (click)="hide = !hide"
          [attr.aria-label]="'Hide password'"
          [attr.aria-pressed]="hide"
        >
          <mat-icon>{{ hide ? 'visibility_off' : 'visibility' }}</mat-icon>
        </button>
      </mat-form-field>

      <mat-form-field appearance="outline" *ngIf="signup">
        <mat-label>confirmer</mat-label>
        <input
          matInput
          type="password"
          formControlName="confirmPassword"
          aria-hidden="false"
          aria-label="confirm Password"
        />
      </mat-form-field>

      <mat-form-field appearance="outline" *ngIf="signup">
        <mat-label>username</mat-label>
        <input matInput id="username" formControlName="username" />
        <mat-icon
          matSuffix
          aria-hidden="false"
          aria-label="username login"
          class="emailIcon"
        >
          &#xe7fd;
        </mat-icon>
      </mat-form-field>
      <div class="error" *ngIf="error">{{ error }}</div>
      <mat-dialog-actions *ngIf="signup">
        <button
          mat-stroked-button
          color="primary"
          (click)="onSignUp()"
          [disabled]="!loginForm.valid"
        >
          <mat-icon>save</mat-icon> enregistrer
        </button>
        <button mat-stroked-button color="accent" (click)="onCancel()">
          <mat-icon>cancel</mat-icon> Annuler
        </button>
      </mat-dialog-actions>

      <br />

      <mat-dialog-actions *ngIf="!signup">
        <button
          mat-stroked-button
          color="primary"
          (click)="onLogin()"
          [disabled]="!loginForm.valid"
        >
          <mat-icon matSuffix aria-hidden="false" aria-label="Email login">
            &#xea77;
          </mat-icon>
          Login
        </button>

        <button mat-stroked-button color="primary" (click)="newSignup()">
          <mat-icon>save</mat-icon> SignUp
        </button>
      </mat-dialog-actions>
    </form>
  </mat-dialog-content>
</mat-card>
